(this["webpackJsonptrain-control"]=this["webpackJsonptrain-control"]||[]).push([[0],{107:function(e,t,n){e.exports=n(143)},112:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),l=n.n(c),i=(n(112),n(14)),o=n(12),s=n.n(o),u=n(28),m=n(16),p=n(8),d=n(215),f=n(218),h=n(200),b=n(223),v=n(216),g=n(217),E=n(59),y=n(219),w=n(220),k=n(25),O=n.n(k),j=n(62),x=n.n(j),S=n(92),C=n.n(S);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var I=function(e){var t=e.svgRef,n=e.title,a=A(e,["svgRef","title"]);return r.a.createElement("svg",N({width:"100%",height:"100%",viewBox:"8 0 28 46",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:1.5},ref:t},a),n?r.a.createElement("title",null,n):null,r.a.createElement("g",{id:"Switch-2A",serifid:"Switch 2A"},r.a.createElement("g",{id:"Switch"},r.a.createElement("path",{d:"M34.119,43.607l0,-28.947",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"straight-outer",d:"M34.119,1.955l0,10.818",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"straight-inner",d:"M26.828,1.958l0,10.818",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{d:"M26.828,24.131l0,19.64",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"divergent-inner",d:"M26.416,23.186l-16.723,-16.722",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"divergent-outer",d:"M25.833,12.419l-10.814,-10.161",style:{fill:"none",strokeWidth:2}})),r.a.createElement("g",{id:"Label"},r.a.createElement("g",null,r.a.createElement("path",{d:"M26.766,33.785l-3.609,0",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{d:"M1.959,29.305c0,-2.665 2.164,-4.828 4.828,-4.828l9.656,0c2.665,0 4.829,2.163 4.829,4.828l0,9.656c0,2.665 -2.164,4.828 -4.829,4.828l-9.656,0c-2.664,0 -4.828,-2.163 -4.828,-4.828l0,-9.656Z",style:{fill:"none",strokeWidth:2}})),r.a.createElement("text",{x:"3.619px",y:"37.709px",style:{fontFamily:"'Arial-BoldMT', 'Arial', sans-serif",fontWeight:700,fontSize:10}},"101"))))},W=r.a.forwardRef((function(e,t){return r.a.createElement(I,N({svgRef:t},e))})),D=(n.p,n(227)),T=n(207),B=n(210),L=n(212),M=n(208),Y=n(209),P=n(211),z=n(228),R=n(56),G=n.n(R),J=n(88),U=n.n(J),$=n(89),q=n.n($),F=n(144),H=n(203),V=n(54),Z=n.n(V),K=n(55),Q=n.n(K),X=n(205),_=n(225),ee=n(204),te=n(58),ne=n(197),ae=n(79),re=n.n(ae),ce=n(38),le=n.n(ce),ie=n(75),oe=n.n(ie),se=n(78),ue=n.n(se),me=n(76),pe=n.n(me),de=n(77),fe=n.n(de),he=n(202),be=n(221),ve=n(226),ge=n(206),Ee=n(198),ye=n(199),we=n(196),ke=function(e){return e<90?90-e+90:90-(e-90)},Oe=function(e){var t=e.open,n=e.config,c=e.onClose,l=e.onChange,i=n.id,o=Object(a.useState)(n.name),u=Object(p.a)(o,2),d=u[0],f=u[1],v=Object(a.useState)(n.line),g=Object(p.a)(v,2),E=g[0],y=g[1],w=Object(a.useState)(n.straight),k=Object(p.a)(w,2),j=k[0],x=k[1],S=Object(a.useState)(n.divergent),C=Object(p.a)(S,2),N=C[0],A=C[1],I=Object(a.useState)(!1),W=Object(p.a)(I,2),D=W[0],T=W[1],B=Object(a.useState)(!0),L=Object(p.a)(B,2),M=L[0],Y=L[1],P=Object(a.useState)(n.straight===ke(n.divergent)),z=Object(p.a)(P,2),R=z[0],J=z[1],U=Object(a.useState)(!0),$=Object(p.a)(U,2),q=$[0],V=$[1],K=Object(a.useState)(!1),_=Object(p.a)(K,2),ae=_[0],ce=_[1],ie=function(){console.log(e),c()},se=function(e){D||(T(!0),ce(!1),Oe(e).then((function(e){console.log("complete",e),V(!1)})).catch((function(e){console.log(e),ce(!0)})).finally((function(){T(!1)})))},me=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(!0),ce(!1),e.next=5,l([{id:i,name:d,line:E,straight:j,divergent:N}]);case 5:c(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),ce(!0);case 12:return e.prev=12,T(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),de=function(e){var t=parseInt(e);return""===e||/^\d+$/.test(e)&&t>=0&&t<=360},Oe=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l([{id:i,current:parseInt(t)}]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ve.a,{open:t,onClose:ie,maxWidth:"md","aria-labelledby":"form-dialog-title"},r.a.createElement(we.a,{id:"form-dialog-title"},"Turnout Settings"),r.a.createElement(ne.a,null),r.a.createElement(Ee.a,null,r.a.createElement(b.a,{mt:1,mb:3},r.a.createElement(ye.a,null,"Changes are not saved until you click save."),r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(be.a,{margin:"dense",id:"number",label:"Switch Num",size:"small",disabled:!0,value:i,InputProps:{startAdornment:r.a.createElement(he.a,{position:"start"},r.a.createElement(O.a,null))}})),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(be.a,{margin:"dense",id:"line",label:"Line",size:"small",value:E,onChange:function(e){return y(e.target.value)},InputProps:{startAdornment:r.a.createElement(he.a,{position:"start"},r.a.createElement(oe.a,null))}})),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(be.a,{fullWidth:!0,margin:"dense",id:"name",label:"Switch Name",value:d,onChange:function(e){return f(e.target.value)},InputProps:{startAdornment:r.a.createElement(he.a,{position:"start"},r.a.createElement(pe.a,null))}}))))),r.a.createElement(ne.a,null),r.a.createElement(we.a,{id:"form-servo-title"},!M&&r.a.createElement(H.a,{"aria-label":"lock",onClick:function(){return Y(!0)}},r.a.createElement(fe.a,null)),M&&r.a.createElement(H.a,{"aria-label":"lock",onClick:function(){return Y(!1)}},r.a.createElement(ue.a,null)),"Configure Servo"),r.a.createElement(Ee.a,null,r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0,xs:9},r.a.createElement(be.a,{margin:"dense",id:"straight",label:"Straight",width:"100px",disabled:M||D,value:j,onChange:function(e){var t=parseInt(e.target.value);de(t)&&(x(t),R&&A(ke(t)))}}),R&&r.a.createElement(H.a,{"aria-label":"unlink",onClick:function(){return J(!1)},disabled:M||D},r.a.createElement(Z.a,null)),!R&&r.a.createElement(H.a,{"aria-label":"link",onClick:function(){J(!0),A(j)},disabled:M||D},r.a.createElement(Q.a,null)),r.a.createElement(be.a,{margin:"dense",id:"divergent",label:"Divergent",width:"100px",disabled:M||D,value:N,onChange:function(e){var t=parseInt(e.target.value);de(t)&&(A(t),R&&x(ke(t)))}}),r.a.createElement(b.a,{my:1},r.a.createElement(ee.a,{variant:"outlined",color:"primary"},r.a.createElement(F.a,{onClick:function(){x(n.straight),A(n.divergent)},disabled:M||D,startIcon:r.a.createElement(G.a,null)},"Reset"),r.a.createElement(F.a,{onClick:function(){return se(j)},disabled:D},"Straight"),r.a.createElement(F.a,{onClick:function(){return se(N)},disabled:D},"Divergent"),r.a.createElement(F.a,{onClick:function(){return se(90)},disabled:D},"90\xb0")))),r.a.createElement(h.a,{item:!0,xs:3},D&&r.a.createElement(X.a,{color:"primary",className:"spinner"}),!D&&!q&&r.a.createElement(le.a,{color:"action",style:{color:te.a[500],fontSize:80}}),ae&&!D&&r.a.createElement(re.a,{color:"error",style:{fontSize:80}})))),r.a.createElement(ge.a,null,r.a.createElement(F.a,{onClick:ie},"Cancel"),r.a.createElement(F.a,{onClick:me,color:"primary"},"Save")))},je=n(21),xe=n(80),Se=n.n(xe),Ce=n(81),Ne=n.n(Ce),Ae=n(82),Ie=n.n(Ae),We=n(83),De=n.n(We),Te=n(84),Be=n.n(Te),Le=n(85),Me=n.n(Le),Ye=n(86),Pe=n.n(Ye),ze=n(87),Re=n.n(ze);function Ge(){return(Ge=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(m.a)(s.a.mark((function e(){var t,n,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,e.prev=1,null===t){e.next=8;break}return e.next=5,fetch("".concat(Fe,"/turnouts/").concat(t));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,fetch("".concat(Fe,"/turnouts"));case 10:e.t0=e.sent;case 11:return n=e.t0,e.abrupt("return",n.json());case 15:throw e.prev=15,e.t1=e.catch(1),console.error(e.t1),new Error("Unable to read Turnout(s)",t,"id=".concat(t));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function Ue(){return(Ue=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Fe,"/turnouts/").concat(t.id),{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),new Error("Unable to update Turnout",t);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function $e(){return($e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=[{name:"Red",color:je.red[500],img:Pe.a},{name:"Green",color:je.green[500],img:Ie.a},{name:"Magenta",color:je.pink[500],img:De.a},{name:"Yellow",color:je.yellow[500],img:Re.a},{name:"Orange",color:je.orange[500],img:Be.a},{name:"Blue",color:je.blue[500],img:Se.a},{name:"Brown",color:je.brown[500],img:Ne.a},{name:"Purple",color:je.purple[500],img:Me.a}],Fe="http://traincontrol:5000",He={get:function(){return Je.apply(this,arguments)},put:function(e){return Ue.apply(this,arguments)},post:function(){return Ge.apply(this,arguments)},delete:function(e){return $e.apply(this,arguments)}},Ve=(n(138),function(e){var t=e.config,n=e.linked,c=e.onChange,l=Object(a.useState)(t.current===t.divergent),i=Object(p.a)(l,2),o=i[0],u=i[1],d=Object(a.useState)(!1),f=Object(p.a)(d,2),h=f[0],v=f[1],g=Object(a.useState)(!1),y=Object(p.a)(g,2),w=y[0],k=y[1],j=Object(a.useState)(!0),x=Object(p.a)(j,2),S=x[0],C=x[1],N=Object(a.useState)(!1),A=Object(p.a)(N,2),I=A[0],R=A[1],J=Object(a.useState)(!0),$=Object(p.a)(J,2),V=$[0],K=$[1],ee=t.current,te=t.relay,ne=t.crossover,ae=t.reverse,re=t.name,ce=t.id,le=t.line,ie=t.label,oe=t.abbr,se=t.straight,ue=t.divergent,me=t.default;Object(a.useEffect)((function(){u(ee===ue)}),[ee,se,ue]);var pe=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a=[{id:ce,current:o?se:ue}],v(!0),C(!1),n&&V&&a.push({id:n.id,current:o?n.straight:n.divergent}),e.next=9,c(a);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),k(e.t0.toString());case 15:return e.prev=15,v(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:ce,current:"straight"===me?se:ue},e.next=3,c([n]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){K(e.target.checked)};return r.a.createElement(T.a,{className:"turnout"},r.a.createElement(M.a,{className:"media ".concat(h?"loading":""),onClick:pe},r.a.createElement(Y.a,{component:"div",height:"100%",title:"Turnout State",className:"media-container"},r.a.createElement("div",{className:"svg-wrapper"},r.a.createElement(W,{width:"90",className:"turnout-image ".concat(o?"divergent":"straight")})),h&&r.a.createElement(X.a,{color:"primary",className:"spinner"}))),r.a.createElement(B.a,{className:"information"},r.a.createElement(b.a,null,r.a.createElement(D.a,{label:"".concat(ie),icon:r.a.createElement(O.a,null),variant:"outlined",className:"chip",size:"small",style:{backgroundColor:qe.find((function(e){return e.name===le})).color}}),h||S?r.a.createElement(Q.a,{style:{color:"gray"}}):r.a.createElement(Z.a,{style:{color:"green"}}),te&&r.a.createElement(U.a,{style:{color:"green"}})),r.a.createElement(b.a,{my:1},r.a.createElement(E.a,{component:"h6",variant:"h6",gutterBottom:!0},re," ",r.a.createElement("strong",{style:{whiteSpace:"nowrap"}},"(",oe,")")),r.a.createElement(E.a,{component:"small",gutterBottom:!0},"Angle: ",ee),ne&&r.a.createElement(b.a,null,r.a.createElement(P.a,{control:r.a.createElement(z.a,{checked:V,onChange:fe,name:"islinked"}),label:"Link crossover: ".concat(n.label)})),ae&&r.a.createElement(b.a,null,r.a.createElement(P.a,{control:r.a.createElement(z.a,{checked:V,onChange:fe,name:"islinked"}),label:"Link reverse loop switch: ".concat(n.label)})))),r.a.createElement(L.a,{className:"actions"},r.a.createElement(F.a,{variant:"contained",color:"primary",onClick:pe,startIcon:r.a.createElement(O.a,null)},"Toggle"),r.a.createElement("span",null,r.a.createElement(H.a,{variant:"outlined",onClick:de,color:"primary",disabled:h},r.a.createElement(G.a,null)),r.a.createElement(H.a,{variant:"outlined",color:"default",onClick:function(){return R(!0)}},r.a.createElement(q.a,null)))),r.a.createElement(Oe,{open:I,config:t,onClose:function(){return R(!1)},onChange:c}),r.a.createElement(_.a,{open:!!w,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&k(void 0)},message:w}))}),Ze=n(94),Ke=n(213),Qe=n(63),Xe=n(57),_e=n.n(Xe),et=n(90),tt=n.n(et);n(139);var nt=function(e){e.turnouts;var t=["Brown","Blue","Purple"],n=qe.map((function(e){return Object(u.a)({visible:!t.includes(e.name)},e)})),c=Object(a.useState)(n),l=Object(p.a)(c,2),o=l[0],s=l[1],m=Object(a.useState)(!1),d=Object(p.a)(m,2),f=d[0],v=d[1],g=function(e){var t=o.find((function(t){return t.name===e.name}));t.visible=!t.visible,s(Object(i.a)(o))};return r.a.createElement(Ze.a,null,r.a.createElement(h.a,{container:!0,width:"100%",direction:"row"},r.a.createElement(h.a,{item:!0,xs:12,sm:2,className:"filters"},r.a.createElement(b.a,null,r.a.createElement(E.a,{component:"h5",variant:"h5",gutterBottom:!0},"Lines"),o.map((function(e,t){return r.a.createElement(D.a,{key:t,label:"".concat(e.name," Line"),variant:"outlined",className:"line-toggle",style:{backgroundColor:e.color,opacity:e.visible?1:.3},onClick:function(){return g(e)},onDelete:function(){return g(e)},deleteIcon:e.visible?r.a.createElement(le.a,null):null,clickable:!0})})),r.a.createElement(Ke.a,null,r.a.createElement(P.a,{control:r.a.createElement(z.a,{value:"showTurnouts",onChange:function(e){v(e.target.checked)},checked:f}),label:"Show Turnouts"})))),r.a.createElement(h.a,{item:!0,xs:12,sm:10},r.a.createElement(Qe.b,{width:"100%",options:{}},r.a.createElement(Qe.a,{width:"100%"},r.a.createElement("div",{className:function(){var e=o.filter((function(e){return e.visible})).map((function(e){return"show-line-".concat(e.line)}));return f&&e.push("show-turnouts"),"layout-img ".concat(e.join(" "))}()},r.a.createElement("img",{src:_e.a,className:"layout-base-layer",alt:"test",width:"100%"}),o.filter((function(e){return e.visible})).map((function(e,t){return r.a.createElement("img",{key:t,src:e.img,className:"layout-layer",alt:"test",width:"100%"})})),f&&r.a.createElement("img",{src:tt.a,className:"layout-layer",alt:"test",width:"100%"})))))))},at=n(91);n(140);var rt=function(e){var t=e.config,n=e.linked,c=e.onChange,l=(t.relay,t.crossover,t.reverse,t.name,t.id),i=t.label,o=(t.line,t.abbr,t.current),u=t.straight,d=t.divergent,f=(t.default,Object(a.useState)(t.current===t.divergent)),h=Object(p.a)(f,2),b=h[0],v=h[1],g=Object(a.useState)(!1),E=Object(p.a)(g,2),y=E[0],w=E[1];Object(a.useEffect)((function(){v(o===d)}),[o,u,d]);var k=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=[{id:l,current:b?u:d}],w(!0),n&&t.push({id:n.id,current:b?n.straight:n.divergent}),e.next=8,c(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:return e.prev=13,w(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"switch switch-".concat(l," box no-cursor")},r.a.createElement(F.a,{variant:"outlined",color:"secondary",size:"small",startIcon:r.a.createElement(O.a,null),onClick:k,className:"cursor"},r.a.createElement("strong",null,i)),r.a.createElement("span",{className:"straight-indicator straight-indicator--".concat(b?"off":"on")}),r.a.createElement("span",{className:"divergent-indicator divergent-indicator--".concat(b?"on":"off")}))};n(141);var ct=function(e){var t=e.turnouts,n=e.onChange,c=["Brown","Blue","Purple"],l=qe.map((function(e){return Object(u.a)({visible:!c.includes(e.name)},e)})),o=Object(a.useState)(l),s=Object(p.a)(o,2),m=s[0],d=s[1],f=Object(a.useState)(!0),v=Object(p.a)(f,2),g=v[0],y=v[1],w=Object(a.useState)({scale:1,translation:{x:0,y:0}}),k=Object(p.a)(w,2),O=k[0],j=k[1],x=function(e){var t=m.find((function(t){return t.name===e.name}));t.visible=!t.visible,d(Object(i.a)(m))},S=function(e){return t.find((function(t){return e===t.id}))},C=function(e){return e.crossover?S(e.crossover):e.reverse?S(e.reverse):null};return r.a.createElement(Ze.a,null,r.a.createElement(h.a,{container:!0,width:"100%",direction:"row"},r.a.createElement(h.a,{item:!0,xs:12,className:"filters"},r.a.createElement(b.a,null,r.a.createElement(E.a,{component:"h5",variant:"h5",gutterBottom:!0},"Lines"),m.map((function(e,t){return r.a.createElement(D.a,{key:t,size:"small",label:"".concat(e.name),variant:"outlined",className:"line-toggle",style:{backgroundColor:e.color,opacity:e.visible?1:.3},onClick:function(){return x(e)},onDelete:function(){return x(e)},deleteIcon:e.visible?r.a.createElement(le.a,null):null,clickable:!0})})),r.a.createElement(P.a,{control:r.a.createElement(z.a,{value:"showTurnouts",onChange:function(e){y(e.target.checked)},checked:g}),label:"Show Turnouts"}))),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(at.MapInteractionCSS,{scale:O.scale,translation:O.translation,onChange:function(e){var t=e.scale,n=e.translation;return j({scale:t,translation:n})},defaultScale:1,defaultTranslation:{x:0,y:0},minScale:.05,maxScale:5,showControls:!0},r.a.createElement("div",{className:"map-control"},r.a.createElement("div",{className:function(){var e=m.filter((function(e){return e.visible})).map((function(e){return"show-line-".concat(e.line)}));return g&&e.push("show-turnouts"),"layout-img ".concat(e.join(" "))}()},r.a.createElement("img",{src:_e.a,className:"layout-base-layer",alt:"test",width:"100%"}),m.filter((function(e){return e.visible})).map((function(e,t){return r.a.createElement("img",{key:t,src:e.img,className:"layout-layer",alt:"test",width:"100%"})})),g&&r.a.createElement("div",{className:"switch-container"},t&&t.map((function(e){return r.a.createElement(rt,{key:e.id,className:"layout-switch",config:e,linked:C(e),onChange:n})})))))))))},lt=n(214),it=n(93),ot=Object(it.a)({typography:{useNextVariants:!0},palette:{type:"dark",primary:je.red,secondary:je.lightGreen},background:{default:je.grey[900]}});n(142);var st=function(){var e=Object(a.useState)("Conductor"),t=Object(p.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)({data:null,status:"idle"}),o=Object(p.a)(l,2),k=o[0],j=o[1],S=Object(a.useState)([]),N=Object(p.a)(S,2),A=N[0],I=N[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(Object(u.a)({},k,{status:"pending"})),e.next=3,He.get();case 3:t=e.sent,j(Object(u.a)({},k,{data:t,status:"done"}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null===k.data&&"idle"===k.status?e():I(k.data)}),[k]);var W=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){return(n=Object(m.a)(s.a.mark((function e(){var n,a,r,c,l,i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=!0,r=!1,c=void 0,e.prev=4,l=t[Symbol.iterator]();case 6:if(a=(i=l.next()).done){e.next=15;break}return o=i.value,e.next=10,He.put(o);case 10:u=e.sent,n.push(u);case 12:a=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=!0,c=e.t0;case 21:e.prev=21,e.prev=22,a||null==l.return||l.return();case 24:if(e.prev=24,!r){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])})))).apply(this,arguments)},function(){return n.apply(this,arguments)}().then((function(e){var t=A.map((function(t){var n=e.find((function(e){return e.id===t.id}));return n?Object(u.a)({},t,{},n):t}));I(Object(i.a)(t))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return A.find((function(t){return e===t.id}))},T=function(e){return e.crossover?D(e.crossover):e.reverse?D(e.reverse):null};return r.a.createElement(lt.a,{theme:ot},r.a.createElement(d.a,null),r.a.createElement(b.a,{display:"flex",flexDirection:"column",height:"100%",width:"100%"},r.a.createElement(b.a,null,r.a.createElement(v.a,{position:"sticky"},r.a.createElement(g.a,null,r.a.createElement(E.a,{variant:"h6"},n)))),r.a.createElement(b.a,{flexGrow:1,width:"100%",alignContent:"center",className:"App-content",mt:1},r.a.createElement(f.a,{maxWidth:"lg"},"Turnouts"===n&&r.a.createElement(h.a,{container:!0,spacing:2},A&&A.map((function(e){return r.a.createElement(h.a,{key:e.id,item:!0,sm:6,xs:12},r.a.createElement(Ve,{config:e,linked:T(e),onChange:W}))}))),"Layout"===n&&r.a.createElement(nt,{turnouts:A}),"Settings"===n&&r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement("p",null,"Settings")),"Conductor"===n&&r.a.createElement(ct,{turnouts:A,onChange:W}))),r.a.createElement(b.a,{mt:1},r.a.createElement(y.a,{value:n,onChange:function(e,t){c(t)},showLabels:!0,className:"App-footer"},r.a.createElement(w.a,{label:"Conductor",value:"Conductor",icon:r.a.createElement(C.a,null)}),r.a.createElement(w.a,{label:"Turnouts",value:"Turnouts",icon:r.a.createElement(O.a,null)}),r.a.createElement(w.a,{label:"Layout",value:"Layout",icon:r.a.createElement(x.a,null)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-base.9c3d904a.png"},80:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-blueline.e0160c42.png"},81:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-brownline.9b239898.png"},82:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-greenline.deb95cb4.png"},83:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-magentaline.90f04987.png"},84:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-orangeline.6ff3ae42.png"},85:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-purpleline.57038a14.png"},86:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-redline.8c26ca8a.png"},87:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-yellowline.90eb524b.png"},90:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-switches.049c4d96.png"}},[[107,1,2]]]);
//# sourceMappingURL=main.2e8015d4.chunk.js.map