(this["webpackJsonptrain-control"]=this["webpackJsonptrain-control"]||[]).push([[0],{107:function(e,t,a){e.exports=a(143)},112:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=(a(112),a(14)),i=a(12),s=a.n(i),u=a(26),m=a(16),p=a(8),d=a(215),f=a(218),h=a(200),b=a(223),v=a(216),g=a(217),E=a(205),y=a(59),w=a(219),k=a(220),O=a(25),j=a.n(O),x=a(62),S=a.n(x),C=a(93),N=a.n(C);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var W=function(e){var t=e.svgRef,a=e.title,n=I(e,["svgRef","title"]);return r.a.createElement("svg",A({width:"100%",height:"100%",viewBox:"8 0 28 46",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:1.5},ref:t},n),a?r.a.createElement("title",null,a):null,r.a.createElement("g",{id:"Switch-2A",serifid:"Switch 2A"},r.a.createElement("g",{id:"Switch"},r.a.createElement("path",{d:"M34.119,43.607l0,-28.947",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"straight-outer",d:"M34.119,1.955l0,10.818",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"straight-inner",d:"M26.828,1.958l0,10.818",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{d:"M26.828,24.131l0,19.64",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"divergent-inner",d:"M26.416,23.186l-16.723,-16.722",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"divergent-outer",d:"M25.833,12.419l-10.814,-10.161",style:{fill:"none",strokeWidth:2}})),r.a.createElement("g",{id:"Label"},r.a.createElement("g",null,r.a.createElement("path",{d:"M26.766,33.785l-3.609,0",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{d:"M1.959,29.305c0,-2.665 2.164,-4.828 4.828,-4.828l9.656,0c2.665,0 4.829,2.163 4.829,4.828l0,9.656c0,2.665 -2.164,4.828 -4.829,4.828l-9.656,0c-2.664,0 -4.828,-2.163 -4.828,-4.828l0,-9.656Z",style:{fill:"none",strokeWidth:2}})),r.a.createElement("text",{x:"3.619px",y:"37.709px",style:{fontFamily:"'Arial-BoldMT', 'Arial', sans-serif",fontWeight:700,fontSize:10}},"101"))))},D=r.a.forwardRef((function(e,t){return r.a.createElement(W,A({svgRef:t},e))})),T=(a.p,a(227)),B=a(207),L=a(210),M=a(212),P=a(208),Y=a(209),z=a(211),R=a(228),G=a(56),J=a.n(G),U=a(89),$=a.n(U),q=a(90),F=a.n(q),H=a(144),V=a(203),Z=a(54),K=a.n(Z),Q=a(55),X=a.n(Q),_=a(225),ee=a(204),te=a(58),ae=a(197),ne=a(80),re=a.n(ne),ce=a(38),le=a.n(ce),oe=a(76),ie=a.n(oe),se=a(79),ue=a.n(se),me=a(77),pe=a.n(me),de=a(78),fe=a.n(de),he=a(202),be=a(221),ve=a(226),ge=a(206),Ee=a(198),ye=a(199),we=a(196),ke=function(e){return e<90?90-e+90:90-(e-90)},Oe=function(e){var t=e.open,a=e.config,c=e.onClose,l=e.onChange,o=a.id,i=Object(n.useState)(a.name),u=Object(p.a)(i,2),d=u[0],f=u[1],v=Object(n.useState)(a.line),g=Object(p.a)(v,2),y=g[0],w=g[1],k=Object(n.useState)(a.straight),O=Object(p.a)(k,2),x=O[0],S=O[1],C=Object(n.useState)(a.divergent),N=Object(p.a)(C,2),A=N[0],I=N[1],W=Object(n.useState)(!1),D=Object(p.a)(W,2),T=D[0],B=D[1],L=Object(n.useState)(!0),M=Object(p.a)(L,2),P=M[0],Y=M[1],z=Object(n.useState)(a.straight===ke(a.divergent)),R=Object(p.a)(z,2),G=R[0],U=R[1],$=Object(n.useState)(!0),q=Object(p.a)($,2),F=q[0],Z=q[1],Q=Object(n.useState)(!1),_=Object(p.a)(Q,2),ne=_[0],ce=_[1],oe=function(){console.log(e),c()},se=function(e){T||(B(!0),ce(!1),Oe(e).then((function(e){console.log("complete",e),Z(!1)})).catch((function(e){console.log(e),ce(!0)})).finally((function(){B(!1)})))},me=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),ce(!1),e.next=5,l([{id:o,name:d,line:y,straight:x,divergent:A}]);case 5:c(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),ce(!0);case 12:return e.prev=12,B(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),de=function(e){var t=parseInt(e);return""===e||/^\d+$/.test(e)&&t>=0&&t<=360},Oe=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l([{id:o,current:parseInt(t)}]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ve.a,{open:t,onClose:oe,maxWidth:"md","aria-labelledby":"form-dialog-title"},r.a.createElement(we.a,{id:"form-dialog-title"},"Turnout Settings"),r.a.createElement(ae.a,null),r.a.createElement(Ee.a,null,r.a.createElement(b.a,{mt:1,mb:3},r.a.createElement(ye.a,null,"Changes are not saved until you click save."),r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(be.a,{margin:"dense",id:"number",label:"Switch Num",size:"small",disabled:!0,value:o,InputProps:{startAdornment:r.a.createElement(he.a,{position:"start"},r.a.createElement(j.a,null))}})),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(be.a,{margin:"dense",id:"line",label:"Line",size:"small",value:y,onChange:function(e){return w(e.target.value)},InputProps:{startAdornment:r.a.createElement(he.a,{position:"start"},r.a.createElement(ie.a,null))}})),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(be.a,{fullWidth:!0,margin:"dense",id:"name",label:"Switch Name",value:d,onChange:function(e){return f(e.target.value)},InputProps:{startAdornment:r.a.createElement(he.a,{position:"start"},r.a.createElement(pe.a,null))}}))))),r.a.createElement(ae.a,null),r.a.createElement(we.a,{id:"form-servo-title"},!P&&r.a.createElement(V.a,{"aria-label":"lock",onClick:function(){return Y(!0)}},r.a.createElement(fe.a,null)),P&&r.a.createElement(V.a,{"aria-label":"lock",onClick:function(){return Y(!1)}},r.a.createElement(ue.a,null)),"Configure Servo"),r.a.createElement(Ee.a,null,r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0,xs:9},r.a.createElement(be.a,{margin:"dense",id:"straight",label:"Straight",width:"100px",disabled:P||T,value:x,onChange:function(e){var t=parseInt(e.target.value);de(t)&&(S(t),G&&I(ke(t)))}}),G&&r.a.createElement(V.a,{"aria-label":"unlink",onClick:function(){return U(!1)},disabled:P||T},r.a.createElement(K.a,null)),!G&&r.a.createElement(V.a,{"aria-label":"link",onClick:function(){U(!0),I(x)},disabled:P||T},r.a.createElement(X.a,null)),r.a.createElement(be.a,{margin:"dense",id:"divergent",label:"Divergent",width:"100px",disabled:P||T,value:A,onChange:function(e){var t=parseInt(e.target.value);de(t)&&(I(t),G&&S(ke(t)))}}),r.a.createElement(b.a,{my:1},r.a.createElement(ee.a,{variant:"outlined",color:"primary"},r.a.createElement(H.a,{onClick:function(){S(a.straight),I(a.divergent)},disabled:P||T,startIcon:r.a.createElement(J.a,null)},"Reset"),r.a.createElement(H.a,{onClick:function(){return se(x)},disabled:T},"Straight"),r.a.createElement(H.a,{onClick:function(){return se(A)},disabled:T},"Divergent"),r.a.createElement(H.a,{onClick:function(){return se(90)},disabled:T},"90\xb0")))),r.a.createElement(h.a,{item:!0,xs:3},T&&r.a.createElement(E.a,{color:"primary",className:"spinner"}),!T&&!F&&r.a.createElement(le.a,{color:"action",style:{color:te.a[500],fontSize:80}}),ne&&!T&&r.a.createElement(re.a,{color:"error",style:{fontSize:80}})))),r.a.createElement(ge.a,null,r.a.createElement(H.a,{onClick:oe},"Cancel"),r.a.createElement(H.a,{onClick:me,color:"primary"},"Save")))},je=a(21),xe=a(81),Se=a.n(xe),Ce=a(82),Ne=a.n(Ce),Ae=a(83),Ie=a.n(Ae),We=a(84),De=a.n(We),Te=a(85),Be=a.n(Te),Le=a(86),Me=a.n(Le),Pe=a(87),Ye=a.n(Pe),ze=a(88),Re=a.n(ze);function Ge(){return(Ge=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(m.a)(s.a.mark((function e(){var t,a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:null,e.prev=1,null===t){e.next=8;break}return e.next=5,fetch("".concat(Fe,"/turnouts/").concat(t));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,fetch("".concat(Fe,"/turnouts"));case 10:e.t0=e.sent;case 11:return a=e.t0,e.abrupt("return",a.json());case 15:throw e.prev=15,e.t1=e.catch(1),console.error(e.t1),new Error("Unable to read Turnout(s)",t,"id=".concat(t));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function Ue(){return(Ue=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Fe,"/turnouts/").concat(t.id),{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),new Error("Unable to update Turnout",t);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function $e(){return($e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=[{name:"Red",color:je.red[500],img:Ye.a},{name:"Green",color:je.green[500],img:Ie.a},{name:"Magenta",color:je.pink[500],img:De.a},{name:"Yellow",color:je.yellow[500],img:Re.a},{name:"Orange",color:je.orange[500],img:Be.a},{name:"Blue",color:je.blue[500],img:Se.a},{name:"Brown",color:je.brown[500],img:Ne.a},{name:"Purple",color:je.purple[500],img:Me.a}],Fe="https://traincontrol:5000",He={get:function(){return Je.apply(this,arguments)},put:function(e){return Ue.apply(this,arguments)},post:function(){return Ge.apply(this,arguments)},delete:function(e){return $e.apply(this,arguments)}},Ve=(a(138),function(e){var t=e.config,a=e.linked,c=e.onChange,l=Object(n.useState)(t.current===t.divergent),o=Object(p.a)(l,2),i=o[0],u=o[1],d=Object(n.useState)(!1),f=Object(p.a)(d,2),h=f[0],v=f[1],g=Object(n.useState)(!1),w=Object(p.a)(g,2),k=w[0],O=w[1],x=Object(n.useState)(!0),S=Object(p.a)(x,2),C=S[0],N=S[1],A=Object(n.useState)(!1),I=Object(p.a)(A,2),W=I[0],G=I[1],U=Object(n.useState)(!0),q=Object(p.a)(U,2),Z=q[0],Q=q[1],ee=t.current,te=t.relay,ae=t.crossover,ne=t.reverse,re=t.name,ce=t.id,le=t.line,oe=t.label,ie=t.abbr,se=t.straight,ue=t.divergent,me=t.default;Object(n.useEffect)((function(){u(ee===ue)}),[ee,se,ue]);var pe=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n=[{id:ce,current:i?se:ue}],v(!0),N(!1),a&&Z&&n.push({id:a.id,current:i?a.straight:a.divergent}),e.next=9,c(n);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),O(e.t0.toString());case 15:return e.prev=15,v(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:ce,current:"straight"===me?se:ue},e.next=3,c([a]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){Q(e.target.checked)};return r.a.createElement(B.a,{className:"turnout"},r.a.createElement(P.a,{className:"media ".concat(h?"loading":""),onClick:pe},r.a.createElement(Y.a,{component:"div",height:"100%",title:"Turnout State",className:"media-container"},r.a.createElement("div",{className:"svg-wrapper"},r.a.createElement(D,{width:"90",className:"turnout-image ".concat(i?"divergent":"straight")})),h&&r.a.createElement(E.a,{color:"primary",className:"spinner"}))),r.a.createElement(L.a,{className:"information"},r.a.createElement(b.a,null,r.a.createElement(T.a,{label:"".concat(oe),icon:r.a.createElement(j.a,null),variant:"outlined",className:"chip",size:"small",style:{backgroundColor:qe.find((function(e){return e.name===le})).color}}),h||C?r.a.createElement(X.a,{style:{color:"gray"}}):r.a.createElement(K.a,{style:{color:"green"}}),te&&r.a.createElement($.a,{style:{color:"green"}})),r.a.createElement(b.a,{my:1},r.a.createElement(y.a,{component:"h6",variant:"h6",gutterBottom:!0},re," ",r.a.createElement("strong",{style:{whiteSpace:"nowrap"}},"(",ie,")")),r.a.createElement(y.a,{component:"small",gutterBottom:!0},"Angle: ",ee),ae&&r.a.createElement(b.a,null,r.a.createElement(z.a,{control:r.a.createElement(R.a,{checked:Z,onChange:fe,name:"islinked"}),label:"Link crossover: ".concat(a.label)})),ne&&r.a.createElement(b.a,null,r.a.createElement(z.a,{control:r.a.createElement(R.a,{checked:Z,onChange:fe,name:"islinked"}),label:"Link reverse loop switch: ".concat(a.label)})))),r.a.createElement(M.a,{className:"actions"},r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:pe,startIcon:r.a.createElement(j.a,null)},"Toggle"),r.a.createElement("span",null,r.a.createElement(V.a,{variant:"outlined",onClick:de,color:"primary",disabled:h},r.a.createElement(J.a,null)),r.a.createElement(V.a,{variant:"outlined",color:"default",onClick:function(){return G(!0)}},r.a.createElement(F.a,null)))),r.a.createElement(Oe,{open:W,config:t,onClose:function(){return G(!1)},onChange:c}),r.a.createElement(_.a,{open:!!k,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&O(void 0)},message:k}))}),Ze=a(95),Ke=a(213),Qe=a(63),Xe=a(57),_e=a.n(Xe),et=a(91),tt=a.n(et);a(139);var at=function(e){e.turnouts;var t=["Brown","Blue","Purple"],a=qe.map((function(e){return Object(u.a)({visible:!t.includes(e.name)},e)})),c=Object(n.useState)(a),l=Object(p.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)(!1),d=Object(p.a)(m,2),f=d[0],v=d[1],g=function(e){var t=i.find((function(t){return t.name===e.name}));t.visible=!t.visible,s(Object(o.a)(i))};return r.a.createElement(Ze.a,null,r.a.createElement(h.a,{container:!0,width:"100%",direction:"row"},r.a.createElement(h.a,{item:!0,xs:12,sm:2,className:"filters"},r.a.createElement(b.a,null,r.a.createElement(y.a,{component:"h5",variant:"h5",gutterBottom:!0},"Lines"),i.map((function(e,t){return r.a.createElement(T.a,{key:t,label:"".concat(e.name," Line"),variant:"outlined",className:"line-toggle",style:{backgroundColor:e.color,opacity:e.visible?1:.3},onClick:function(){return g(e)},onDelete:function(){return g(e)},deleteIcon:e.visible?r.a.createElement(le.a,null):null,clickable:!0})})),r.a.createElement(Ke.a,null,r.a.createElement(z.a,{control:r.a.createElement(R.a,{value:"showTurnouts",onChange:function(e){v(e.target.checked)},checked:f}),label:"Show Turnouts"})))),r.a.createElement(h.a,{item:!0,xs:12,sm:10},r.a.createElement(Qe.b,{width:"100%",options:{}},r.a.createElement(Qe.a,{width:"100%"},r.a.createElement("div",{className:function(){var e=i.filter((function(e){return e.visible})).map((function(e){return"show-line-".concat(e.line)}));return f&&e.push("show-turnouts"),"layout-img ".concat(e.join(" "))}()},r.a.createElement("img",{src:_e.a,className:"layout-base-layer",alt:"test",width:"100%"}),i.filter((function(e){return e.visible})).map((function(e,t){return r.a.createElement("img",{key:t,src:e.img,className:"layout-layer",alt:"test",width:"100%"})})),f&&r.a.createElement("img",{src:tt.a,className:"layout-layer",alt:"test",width:"100%"})))))))},nt=a(92);a(140);var rt=function(e){var t=e.config,a=e.linked,c=e.onChange,l=(t.relay,t.crossover,t.reverse,t.name,t.id),o=t.label,i=(t.line,t.abbr,t.current),u=t.straight,d=t.divergent,f=(t.default,Object(n.useState)(t.current===t.divergent)),h=Object(p.a)(f,2),b=h[0],v=h[1],g=Object(n.useState)(!1),E=Object(p.a)(g,2),y=E[0],w=E[1];Object(n.useEffect)((function(){v(i===d)}),[i,u,d]);var k=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=[{id:l,current:b?u:d}],w(!0),a&&t.push({id:a.id,current:b?a.straight:a.divergent}),e.next=8,c(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:return e.prev=13,w(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"switch switch-".concat(l," box no-cursor")},r.a.createElement(H.a,{variant:"outlined",color:"secondary",size:"small",startIcon:r.a.createElement(j.a,null),onClick:k,className:"cursor"},r.a.createElement("strong",null,o)),r.a.createElement("span",{className:"straight-indicator straight-indicator--".concat(b?"off":"on")}),r.a.createElement("span",{className:"divergent-indicator divergent-indicator--".concat(b?"on":"off")}))};a(141);var ct=function(e){var t=e.turnouts,a=e.onChange,c=["Brown","Blue","Purple"],l=qe.map((function(e){return Object(u.a)({visible:!c.includes(e.name)},e)})),i=Object(n.useState)(l),s=Object(p.a)(i,2),m=s[0],d=s[1],f=Object(n.useState)(!0),v=Object(p.a)(f,2),g=v[0],E=v[1],w=Object(n.useState)({scale:1,translation:{x:0,y:0}}),k=Object(p.a)(w,2),O=k[0],j=k[1],x=function(e){var t=m.find((function(t){return t.name===e.name}));t.visible=!t.visible,d(Object(o.a)(m))},S=function(e){return t.find((function(t){return e===t.id}))},C=function(e){return e.crossover?S(e.crossover):e.reverse?S(e.reverse):null};return r.a.createElement(Ze.a,null,r.a.createElement(h.a,{container:!0,width:"100%",direction:"row"},r.a.createElement(h.a,{item:!0,xs:12,className:"filters"},r.a.createElement(b.a,null,r.a.createElement(y.a,{component:"h5",variant:"h5",gutterBottom:!0},"Lines"),m.map((function(e,t){return r.a.createElement(T.a,{key:t,size:"small",label:"".concat(e.name),variant:"outlined",className:"line-toggle",style:{backgroundColor:e.color,opacity:e.visible?1:.3},onClick:function(){return x(e)},onDelete:function(){return x(e)},deleteIcon:e.visible?r.a.createElement(le.a,null):null,clickable:!0})})),r.a.createElement(z.a,{control:r.a.createElement(R.a,{value:"showTurnouts",onChange:function(e){E(e.target.checked)},checked:g}),label:"Show Turnouts"}))),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(nt.MapInteractionCSS,{scale:O.scale,translation:O.translation,onChange:function(e){var t=e.scale,a=e.translation;return j({scale:t,translation:a})},defaultScale:1,defaultTranslation:{x:0,y:0},minScale:.05,maxScale:5,showControls:!0},r.a.createElement("div",{className:"map-control"},r.a.createElement("div",{className:function(){var e=m.filter((function(e){return e.visible})).map((function(e){return"show-line-".concat(e.line)}));return g&&e.push("show-turnouts"),"layout-img ".concat(e.join(" "))}()},r.a.createElement("img",{src:_e.a,className:"layout-base-layer",alt:"test",width:"100%"}),m.filter((function(e){return e.visible})).map((function(e,t){return r.a.createElement("img",{key:t,src:e.img,className:"layout-layer",alt:"test",width:"100%"})})),g&&r.a.createElement("div",{className:"switch-container"},t&&t.map((function(e){return r.a.createElement(rt,{key:e.id,className:"layout-switch",config:e,linked:C(e),onChange:a})})))))))))},lt=a(214),ot=a(94),it=Object(ot.a)({typography:{useNextVariants:!0},palette:{type:"dark",primary:je.red,secondary:je.lightGreen},background:{default:je.grey[900]}});a(142);var st=function(){var e=Object(n.useState)("Conductor"),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({data:null,status:"idle"}),i=Object(p.a)(l,2),O=i[0],x=i[1],C=Object(n.useState)([]),A=Object(p.a)(C,2),I=A[0],W=A[1];Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(u.a)({},O,{status:"pending"})),e.prev=1,e.next=4,He.get();case 4:t=e.sent,x(Object(u.a)({},O,{data:t,status:"done"})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),x(Object(u.a)({},O,{status:"error"}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();null===O.data&&"idle"===O.status?e():W(O.data)}),[O]);var D=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){return(a=Object(m.a)(s.a.mark((function e(){var a,n,r,c,l,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=!0,r=!1,c=void 0,e.prev=4,l=t[Symbol.iterator]();case 6:if(n=(o=l.next()).done){e.next=15;break}return i=o.value,e.next=10,He.put(i);case 10:u=e.sent,a.push(u);case 12:n=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=!0,c=e.t0;case 21:e.prev=21,e.prev=22,n||null==l.return||l.return();case 24:if(e.prev=24,!r){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])})))).apply(this,arguments)},function(){return a.apply(this,arguments)}().then((function(e){var t=I.map((function(t){var a=e.find((function(e){return e.id===t.id}));return a?Object(u.a)({},t,{},a):t}));W(Object(o.a)(t))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){return I.find((function(t){return e===t.id}))},B=function(e){return e.crossover?T(e.crossover):e.reverse?T(e.reverse):null};return r.a.createElement(lt.a,{theme:it},r.a.createElement(d.a,null),r.a.createElement(b.a,{display:"flex",flexDirection:"column",height:"100%",width:"100%"},r.a.createElement(b.a,null,r.a.createElement(v.a,{position:"sticky"},r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"h6"},a)))),r.a.createElement(b.a,{flexGrow:1,width:"100%",alignContent:"center",className:"App-content",mt:1},"done"===O.status&&r.a.createElement(f.a,{maxWidth:"lg"},"Turnouts"===a&&r.a.createElement(h.a,{container:!0,spacing:2},I&&I.map((function(e){return r.a.createElement(h.a,{key:e.id,item:!0,sm:6,xs:12},r.a.createElement(Ve,{config:e,linked:B(e),onChange:D}))}))),"Layout"===a&&r.a.createElement(at,{turnouts:I}),"Settings"===a&&r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement("p",null,"Settings")),"Conductor"===a&&r.a.createElement(ct,{turnouts:I,onChange:D})),"idle"===O.status||"pending"===O.status&&r.a.createElement(E.a,{color:"primary",className:"spinner"}),"error"===O.status&&r.a.createElement("h1",null,"Error: could not load turnouts. Check settings and make sure the API host is running.")),r.a.createElement(b.a,{mt:1},r.a.createElement(w.a,{value:a,onChange:function(e,t){c(t)},showLabels:!0,className:"App-footer"},r.a.createElement(k.a,{label:"Conductor",value:"Conductor",icon:r.a.createElement(N.a,null)}),r.a.createElement(k.a,{label:"Turnouts",value:"Turnouts",icon:r.a.createElement(j.a,null)}),r.a.createElement(k.a,{label:"Layout",value:"Layout",icon:r.a.createElement(S.a,null)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-base.9c3d904a.png"},81:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-blueline.e0160c42.png"},82:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-brownline.9b239898.png"},83:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-greenline.deb95cb4.png"},84:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-magentaline.90f04987.png"},85:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-orangeline.6ff3ae42.png"},86:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-purpleline.57038a14.png"},87:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-redline.8c26ca8a.png"},88:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-yellowline.90eb524b.png"},91:function(e,t,a){e.exports=a.p+"static/media/IDAWANY-switches.049c4d96.png"}},[[107,1,2]]]);
//# sourceMappingURL=main.7c94ea6e.chunk.js.map