(this["webpackJsonptrain-control"]=this["webpackJsonptrain-control"]||[]).push([[0],{108:function(e,t,n){e.exports=n(144)},113:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),l=n.n(c),o=(n(113),n(14)),i=n(12),s=n.n(i),u=n(26),m=n(17),p=n(8),d=n(216),f=n(219),h=n(201),b=n(224),v=n(217),g=n(218),E=n(206),y=n(59),w=n(204),k=n(220),O=n(221),j=n(25),x=n.n(j),C=n(63),S=n.n(C),N=n(94),A=n.n(N),I=n(93),W=n.n(I);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var B=function(e){var t=e.svgRef,n=e.title,a=T(e,["svgRef","title"]);return r.a.createElement("svg",D({width:"100%",height:"100%",viewBox:"8 0 28 46",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:1.5},ref:t},a),n?r.a.createElement("title",null,n):null,r.a.createElement("g",{id:"Switch-2A",serifid:"Switch 2A"},r.a.createElement("g",{id:"Switch"},r.a.createElement("path",{d:"M34.119,43.607l0,-28.947",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"straight-outer",d:"M34.119,1.955l0,10.818",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"straight-inner",d:"M26.828,1.958l0,10.818",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{d:"M26.828,24.131l0,19.64",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"divergent-inner",d:"M26.416,23.186l-16.723,-16.722",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{id:"divergent-outer",d:"M25.833,12.419l-10.814,-10.161",style:{fill:"none",strokeWidth:2}})),r.a.createElement("g",{id:"Label"},r.a.createElement("g",null,r.a.createElement("path",{d:"M26.766,33.785l-3.609,0",style:{fill:"none",strokeWidth:2}}),r.a.createElement("path",{d:"M1.959,29.305c0,-2.665 2.164,-4.828 4.828,-4.828l9.656,0c2.665,0 4.829,2.163 4.829,4.828l0,9.656c0,2.665 -2.164,4.828 -4.829,4.828l-9.656,0c-2.664,0 -4.828,-2.163 -4.828,-4.828l0,-9.656Z",style:{fill:"none",strokeWidth:2}})),r.a.createElement("text",{x:"3.619px",y:"37.709px",style:{fontFamily:"'Arial-BoldMT', 'Arial', sans-serif",fontWeight:700,fontSize:10}},"101"))))},L=r.a.forwardRef((function(e,t){return r.a.createElement(B,D({svgRef:t},e))})),M=(n.p,n(228)),P=n(208),Y=n(211),z=n(213),R=n(209),G=n(210),J=n(212),U=n(229),$=n(56),q=n.n($),F=n(89),H=n.n(F),V=n(90),Z=n.n(V),K=n(145),Q=n(54),X=n.n(Q),_=n(55),ee=n.n(_),te=n(226),ne=n(205),ae=n(58),re=n(198),ce=n(80),le=n.n(ce),oe=n(38),ie=n.n(oe),se=n(76),ue=n.n(se),me=n(79),pe=n.n(me),de=n(77),fe=n.n(de),he=n(78),be=n.n(he),ve=n(203),ge=n(222),Ee=n(227),ye=n(207),we=n(199),ke=n(200),Oe=n(197),je=function(e){return e<90?90-e+90:90-(e-90)},xe=function(e){var t=e.open,n=e.config,c=e.onClose,l=e.onChange,o=n.id,i=Object(a.useState)(n.name),u=Object(p.a)(i,2),d=u[0],f=u[1],v=Object(a.useState)(n.line),g=Object(p.a)(v,2),y=g[0],k=g[1],O=Object(a.useState)(n.straight),j=Object(p.a)(O,2),C=j[0],S=j[1],N=Object(a.useState)(n.divergent),A=Object(p.a)(N,2),I=A[0],W=A[1],D=Object(a.useState)(!1),T=Object(p.a)(D,2),B=T[0],L=T[1],M=Object(a.useState)(!0),P=Object(p.a)(M,2),Y=P[0],z=P[1],R=Object(a.useState)(n.straight===je(n.divergent)),G=Object(p.a)(R,2),J=G[0],U=G[1],$=Object(a.useState)(!0),F=Object(p.a)($,2),H=F[0],V=F[1],Z=Object(a.useState)(!1),Q=Object(p.a)(Z,2),_=Q[0],te=Q[1],ce=function(){console.log(e),c()},oe=function(e){B||(L(!0),te(!1),de(e).then((function(e){console.log("complete",e),V(!1)})).catch((function(e){console.log(e),te(!0)})).finally((function(){L(!1)})))},se=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),te(!1),e.next=5,l([{id:o,name:d,line:y,straight:C,divergent:I}]);case 5:c(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),te(!0);case 12:return e.prev=12,L(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){var t=parseInt(e);return""===e||/^\d+$/.test(e)&&t>=0&&t<=360},de=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l([{id:o,current:parseInt(t)}]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Ee.a,{open:t,onClose:ce,maxWidth:"md","aria-labelledby":"form-dialog-title"},r.a.createElement(Oe.a,{id:"form-dialog-title"},"Turnout Settings"),r.a.createElement(re.a,null),r.a.createElement(we.a,null,r.a.createElement(b.a,{mt:1,mb:3},r.a.createElement(ke.a,null,"Changes are not saved until you click save."),r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(ge.a,{margin:"dense",id:"number",label:"Switch Num",size:"small",disabled:!0,value:o,InputProps:{startAdornment:r.a.createElement(ve.a,{position:"start"},r.a.createElement(x.a,null))}})),r.a.createElement(h.a,{item:!0,xs:3},r.a.createElement(ge.a,{margin:"dense",id:"line",label:"Line",size:"small",value:y,onChange:function(e){return k(e.target.value)},InputProps:{startAdornment:r.a.createElement(ve.a,{position:"start"},r.a.createElement(ue.a,null))}})),r.a.createElement(h.a,{item:!0,xs:6},r.a.createElement(ge.a,{fullWidth:!0,margin:"dense",id:"name",label:"Switch Name",value:d,onChange:function(e){return f(e.target.value)},InputProps:{startAdornment:r.a.createElement(ve.a,{position:"start"},r.a.createElement(fe.a,null))}}))))),r.a.createElement(re.a,null),r.a.createElement(Oe.a,{id:"form-servo-title"},!Y&&r.a.createElement(w.a,{"aria-label":"lock",onClick:function(){return z(!0)}},r.a.createElement(be.a,null)),Y&&r.a.createElement(w.a,{"aria-label":"lock",onClick:function(){return z(!1)}},r.a.createElement(pe.a,null)),"Configure Servo"),r.a.createElement(we.a,null,r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement(h.a,{item:!0,xs:9},r.a.createElement(ge.a,{margin:"dense",id:"straight",label:"Straight",width:"100px",disabled:Y||B,value:C,onChange:function(e){var t=parseInt(e.target.value);me(t)&&(S(t),J&&W(je(t)))}}),J&&r.a.createElement(w.a,{"aria-label":"unlink",onClick:function(){return U(!1)},disabled:Y||B},r.a.createElement(X.a,null)),!J&&r.a.createElement(w.a,{"aria-label":"link",onClick:function(){U(!0),W(C)},disabled:Y||B},r.a.createElement(ee.a,null)),r.a.createElement(ge.a,{margin:"dense",id:"divergent",label:"Divergent",width:"100px",disabled:Y||B,value:I,onChange:function(e){var t=parseInt(e.target.value);me(t)&&(W(t),J&&S(je(t)))}}),r.a.createElement(b.a,{my:1},r.a.createElement(ne.a,{variant:"outlined",color:"primary"},r.a.createElement(K.a,{onClick:function(){S(n.straight),W(n.divergent)},disabled:Y||B,startIcon:r.a.createElement(q.a,null)},"Reset"),r.a.createElement(K.a,{onClick:function(){return oe(C)},disabled:B},"Straight"),r.a.createElement(K.a,{onClick:function(){return oe(I)},disabled:B},"Divergent"),r.a.createElement(K.a,{onClick:function(){return oe(90)},disabled:B},"90\xb0")))),r.a.createElement(h.a,{item:!0,xs:3},B&&r.a.createElement(E.a,{color:"primary",className:"spinner"}),!B&&!H&&r.a.createElement(ie.a,{color:"action",style:{color:ae.a[500],fontSize:80}}),_&&!B&&r.a.createElement(le.a,{color:"error",style:{fontSize:80}})))),r.a.createElement(ye.a,null,r.a.createElement(K.a,{onClick:ce},"Cancel"),r.a.createElement(K.a,{onClick:se,color:"primary"},"Save")))},Ce=n(21),Se=n(81),Ne=n.n(Se),Ae=n(82),Ie=n.n(Ae),We=n(83),De=n.n(We),Te=n(84),Be=n.n(Te),Le=n(85),Me=n.n(Le),Pe=n(86),Ye=n.n(Pe),ze=n(87),Re=n.n(ze),Ge=n(88),Je=n.n(Ge);function Ue(){return(Ue=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Object(m.a)(s.a.mark((function e(){var t,n,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,e.prev=1,null===t){e.next=8;break}return e.next=5,fetch("".concat(Ve,"/turnouts/").concat(t));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,fetch("".concat(Ve,"/turnouts"));case 10:e.t0=e.sent;case 11:return n=e.t0,e.abrupt("return",n.json());case 15:throw e.prev=15,e.t1=e.catch(1),console.error(e.t1),new Error("Unable to read Turnout(s)",t,"id=".concat(t));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function qe(){return(qe=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Ve,"/turnouts/").concat(t.id),{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),new Error("Unable to update Turnout",t);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function Fe(){return(Fe=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He=[{name:"Red",color:Ce.red[500],img:Re.a},{name:"Green",color:Ce.green[500],img:De.a},{name:"Magenta",color:Ce.pink[500],img:Be.a},{name:"Yellow",color:Ce.yellow[500],img:Je.a},{name:"Orange",color:Ce.orange[500],img:Me.a},{name:"Blue",color:Ce.blue[500],img:Ne.a},{name:"Brown",color:Ce.brown[500],img:Ie.a},{name:"Purple",color:Ce.purple[500],img:Ye.a}],Ve="https://traincontrol:5000",Ze={get:function(){return $e.apply(this,arguments)},put:function(e){return qe.apply(this,arguments)},post:function(){return Ue.apply(this,arguments)},delete:function(e){return Fe.apply(this,arguments)}},Ke=(n(139),function(e){var t=e.config,n=e.linked,c=e.onChange,l=Object(a.useState)(t.current===t.divergent),o=Object(p.a)(l,2),i=o[0],u=o[1],d=Object(a.useState)(!1),f=Object(p.a)(d,2),h=f[0],v=f[1],g=Object(a.useState)(!1),k=Object(p.a)(g,2),O=k[0],j=k[1],C=Object(a.useState)(!0),S=Object(p.a)(C,2),N=S[0],A=S[1],I=Object(a.useState)(!1),W=Object(p.a)(I,2),D=W[0],T=W[1],B=Object(a.useState)(!0),$=Object(p.a)(B,2),F=$[0],V=$[1],Q=t.current,_=t.relay,ne=t.crossover,ae=t.reverse,re=t.name,ce=t.id,le=t.line,oe=t.label,ie=t.abbr,se=t.straight,ue=t.divergent,me=t.default;Object(a.useEffect)((function(){u(Q===ue)}),[Q,se,ue]);var pe=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a=[{id:ce,current:i?se:ue}],v(!0),A(!1),n&&F&&a.push({id:n.id,current:i?n.straight:n.divergent}),e.next=9,c(a);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),j(e.t0.toString());case 15:return e.prev=15,v(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:ce,current:"straight"===me?se:ue},e.next=3,c([n]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){V(e.target.checked)};return r.a.createElement(P.a,{className:"turnout"},r.a.createElement(R.a,{className:"media ".concat(h?"loading":""),onClick:pe},r.a.createElement(G.a,{component:"div",height:"100%",title:"Turnout State",className:"media-container"},r.a.createElement("div",{className:"svg-wrapper"},r.a.createElement(L,{width:"90",className:"turnout-image ".concat(i?"divergent":"straight")})),h&&r.a.createElement(E.a,{color:"primary",className:"spinner"}))),r.a.createElement(Y.a,{className:"information"},r.a.createElement(b.a,null,r.a.createElement(M.a,{label:"".concat(oe),icon:r.a.createElement(x.a,null),variant:"outlined",className:"chip",size:"small",style:{backgroundColor:He.find((function(e){return e.name===le})).color}}),h||N?r.a.createElement(ee.a,{style:{color:"gray"}}):r.a.createElement(X.a,{style:{color:"green"}}),_&&r.a.createElement(H.a,{style:{color:"green"}})),r.a.createElement(b.a,{my:1},r.a.createElement(y.a,{component:"h6",variant:"h6",gutterBottom:!0},re," ",r.a.createElement("strong",{style:{whiteSpace:"nowrap"}},"(",ie,")")),r.a.createElement(y.a,{component:"small",gutterBottom:!0},"Angle: ",Q),ne&&r.a.createElement(b.a,null,r.a.createElement(J.a,{control:r.a.createElement(U.a,{checked:F,onChange:fe,name:"islinked"}),label:"Link crossover: ".concat(n.label)})),ae&&r.a.createElement(b.a,null,r.a.createElement(J.a,{control:r.a.createElement(U.a,{checked:F,onChange:fe,name:"islinked"}),label:"Link reverse loop switch: ".concat(n.label)})))),r.a.createElement(z.a,{className:"actions"},r.a.createElement(K.a,{variant:"contained",color:"primary",onClick:pe,startIcon:r.a.createElement(x.a,null)},"Toggle"),r.a.createElement("span",null,r.a.createElement(w.a,{variant:"outlined",onClick:de,color:"primary",disabled:h},r.a.createElement(q.a,null)),r.a.createElement(w.a,{variant:"outlined",color:"default",onClick:function(){return T(!0)}},r.a.createElement(Z.a,null)))),r.a.createElement(xe,{open:D,config:t,onClose:function(){return T(!1)},onChange:c}),r.a.createElement(te.a,{open:!!O,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&j(void 0)},message:O}))}),Qe=n(96),Xe=n(214),_e=n(64),et=n(57),tt=n.n(et),nt=n(91),at=n.n(nt);n(140);var rt=function(e){e.turnouts;var t=["Brown","Blue","Purple"],n=He.map((function(e){return Object(u.a)({visible:!t.includes(e.name)},e)})),c=Object(a.useState)(n),l=Object(p.a)(c,2),i=l[0],s=l[1],m=Object(a.useState)(!1),d=Object(p.a)(m,2),f=d[0],v=d[1],g=function(e){var t=i.find((function(t){return t.name===e.name}));t.visible=!t.visible,s(Object(o.a)(i))};return r.a.createElement(Qe.a,null,r.a.createElement(h.a,{container:!0,width:"100%",direction:"row"},r.a.createElement(h.a,{item:!0,xs:12,sm:2,className:"filters"},r.a.createElement(b.a,null,r.a.createElement(y.a,{component:"h5",variant:"h5",gutterBottom:!0},"Lines"),i.map((function(e,t){return r.a.createElement(M.a,{key:t,label:"".concat(e.name," Line"),variant:"outlined",className:"line-toggle",style:{backgroundColor:e.color,opacity:e.visible?1:.3},onClick:function(){return g(e)},onDelete:function(){return g(e)},deleteIcon:e.visible?r.a.createElement(ie.a,null):null,clickable:!0})})),r.a.createElement(Xe.a,null,r.a.createElement(J.a,{control:r.a.createElement(U.a,{value:"showTurnouts",onChange:function(e){v(e.target.checked)},checked:f}),label:"Show Turnouts"})))),r.a.createElement(h.a,{item:!0,xs:12,sm:10},r.a.createElement(_e.b,{width:"100%",options:{}},r.a.createElement(_e.a,{width:"100%"},r.a.createElement("div",{className:function(){var e=i.filter((function(e){return e.visible})).map((function(e){return"show-line-".concat(e.line)}));return f&&e.push("show-turnouts"),"layout-img ".concat(e.join(" "))}()},r.a.createElement("img",{src:tt.a,className:"layout-base-layer",alt:"test",width:"100%"}),i.filter((function(e){return e.visible})).map((function(e,t){return r.a.createElement("img",{key:t,src:e.img,className:"layout-layer",alt:"test",width:"100%"})})),f&&r.a.createElement("img",{src:at.a,className:"layout-layer",alt:"test",width:"100%"})))))))},ct=n(92);n(141);var lt=function(e){var t=e.config,n=e.linked,c=e.onChange,l=(t.relay,t.crossover,t.reverse,t.name,t.id),o=t.label,i=(t.line,t.abbr,t.current),u=t.straight,d=t.divergent,f=(t.default,Object(a.useState)(t.current===t.divergent)),h=Object(p.a)(f,2),b=h[0],v=h[1],g=Object(a.useState)(!1),E=Object(p.a)(g,2),y=E[0],w=E[1];Object(a.useEffect)((function(){v(i===d)}),[i,u,d]);var k=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=[{id:l,current:b?u:d}],w(!0),n&&t.push({id:n.id,current:b?n.straight:n.divergent}),e.next=8,c(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:return e.prev=13,w(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"switch switch-".concat(l," box no-cursor")},r.a.createElement(K.a,{variant:"outlined",color:"secondary",size:"small",startIcon:r.a.createElement(x.a,null),onClick:k,className:"cursor"},r.a.createElement("strong",null,o)),r.a.createElement("span",{className:"straight-indicator straight-indicator--".concat(b?"off":"on")}),r.a.createElement("span",{className:"divergent-indicator divergent-indicator--".concat(b?"on":"off")}))};n(142);var ot=function(e){var t=e.turnouts,n=e.onChange,c=["Brown","Blue","Purple"],l=He.map((function(e){return Object(u.a)({visible:!c.includes(e.name)},e)})),i=Object(a.useState)(l),s=Object(p.a)(i,2),m=s[0],d=s[1],f=Object(a.useState)(!0),v=Object(p.a)(f,2),g=v[0],E=v[1],w=Object(a.useState)({scale:1,translation:{x:0,y:0}}),k=Object(p.a)(w,2),O=k[0],j=k[1],x=function(e){var t=m.find((function(t){return t.name===e.name}));t.visible=!t.visible,d(Object(o.a)(m))},C=function(e){return t.find((function(t){return e===t.id}))},S=function(e){return e.crossover?C(e.crossover):e.reverse?C(e.reverse):null};return r.a.createElement(Qe.a,null,r.a.createElement(h.a,{container:!0,width:"100%",direction:"row"},r.a.createElement(h.a,{item:!0,xs:12,className:"filters"},r.a.createElement(b.a,null,r.a.createElement(y.a,{component:"h5",variant:"h5",gutterBottom:!0},"Lines"),m.map((function(e,t){return r.a.createElement(M.a,{key:t,size:"small",label:"".concat(e.name),variant:"outlined",className:"line-toggle",style:{backgroundColor:e.color,opacity:e.visible?1:.3},onClick:function(){return x(e)},onDelete:function(){return x(e)},deleteIcon:e.visible?r.a.createElement(ie.a,null):null,clickable:!0})})),r.a.createElement(J.a,{control:r.a.createElement(U.a,{value:"showTurnouts",onChange:function(e){E(e.target.checked)},checked:g}),label:"Show Turnouts"}))),r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(ct.MapInteractionCSS,{scale:O.scale,translation:O.translation,onChange:function(e){var t=e.scale,n=e.translation;return j({scale:t,translation:n})},defaultScale:1,defaultTranslation:{x:0,y:0},minScale:.05,maxScale:5,showControls:!0},r.a.createElement("div",{className:"map-control"},r.a.createElement("div",{className:function(){var e=m.filter((function(e){return e.visible})).map((function(e){return"show-line-".concat(e.line)}));return g&&e.push("show-turnouts"),"layout-img ".concat(e.join(" "))}()},r.a.createElement("img",{src:tt.a,className:"layout-base-layer",alt:"test",width:"100%"}),m.filter((function(e){return e.visible})).map((function(e,t){return r.a.createElement("img",{key:t,src:e.img,className:"layout-layer",alt:"test",width:"100%"})})),g&&r.a.createElement("div",{className:"switch-container"},t&&t.map((function(e){return r.a.createElement(lt,{key:e.id,className:"layout-switch",config:e,linked:S(e),onChange:n})})))))))))},it=n(215),st=n(95),ut=Object(st.a)({typography:{useNextVariants:!0},palette:{type:"dark",primary:Ce.red,secondary:Ce.lightGreen},background:{default:Ce.grey[900]}});n(143);var mt=function(){var e=Object(a.useState)("Conductor"),t=Object(p.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)({data:null,status:"idle"}),i=Object(p.a)(l,2),j=i[0],C=i[1],N=Object(a.useState)([]),I=Object(p.a)(N,2),D=I[0],T=I[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(Object(u.a)({},j,{status:"pending"})),e.prev=1,e.next=4,Ze.get();case 4:t=e.sent,C(Object(u.a)({},j,{data:t,status:"done"})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(Object(u.a)({},j,{status:"error"}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();null===j.data&&"idle"===j.status?e():T(j.data)}),[j]);var B=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){return(n=Object(m.a)(s.a.mark((function e(){var n,a,r,c,l,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=!0,r=!1,c=void 0,e.prev=4,l=t[Symbol.iterator]();case 6:if(a=(o=l.next()).done){e.next=15;break}return i=o.value,e.next=10,Ze.put(i);case 10:u=e.sent,n.push(u);case 12:a=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=!0,c=e.t0;case 21:e.prev=21,e.prev=22,a||null==l.return||l.return();case 24:if(e.prev=24,!r){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])})))).apply(this,arguments)},function(){return n.apply(this,arguments)}().then((function(e){var t=D.map((function(t){var n=e.find((function(e){return e.id===t.id}));return n?Object(u.a)({},t,{},n):t}));T(Object(o.a)(t))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return D.find((function(t){return e===t.id}))},M=function(e){return e.crossover?L(e.crossover):e.reverse?L(e.reverse):null};return r.a.createElement(it.a,{theme:ut},r.a.createElement(d.a,null),r.a.createElement(b.a,{display:"flex",flexDirection:"column",height:"100%",width:"100%"},r.a.createElement(b.a,null,r.a.createElement(v.a,{position:"sticky"},r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"h6",className:"title"},n),r.a.createElement(w.a,{onClick:function(e){window.open(Ve)},color:"inherit"},r.a.createElement(W.a,null))))),r.a.createElement(b.a,{flexGrow:1,width:"100%",alignContent:"center",className:"App-content",mt:1},"done"===j.status&&r.a.createElement(f.a,{maxWidth:"lg"},"Turnouts"===n&&r.a.createElement(h.a,{container:!0,spacing:2},D&&D.map((function(e){return r.a.createElement(h.a,{key:e.id,item:!0,sm:6,xs:12},r.a.createElement(Ke,{config:e,linked:M(e),onChange:B}))}))),"Layout"===n&&r.a.createElement(rt,{turnouts:D}),"Settings"===n&&r.a.createElement(h.a,{container:!0,spacing:1},r.a.createElement("p",null,"Settings")),"Conductor"===n&&r.a.createElement(ot,{turnouts:D,onChange:B})),"idle"===j.status||"pending"===j.status&&r.a.createElement(E.a,{color:"primary",className:"spinner"}),"error"===j.status&&r.a.createElement("h1",null,"Error: could not load turnouts. Check settings and make sure the API host is running.")),r.a.createElement(b.a,{mt:1},r.a.createElement(k.a,{value:n,onChange:function(e,t){c(t)},showLabels:!0,className:"App-footer"},r.a.createElement(O.a,{label:"Conductor",value:"Conductor",icon:r.a.createElement(A.a,null)}),r.a.createElement(O.a,{label:"Turnouts",value:"Turnouts",icon:r.a.createElement(x.a,null)}),r.a.createElement(O.a,{label:"Layout",value:"Layout",icon:r.a.createElement(S.a,null)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-base.9c3d904a.png"},81:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-blueline.e0160c42.png"},82:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-brownline.9b239898.png"},83:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-greenline.deb95cb4.png"},84:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-magentaline.90f04987.png"},85:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-orangeline.6ff3ae42.png"},86:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-purpleline.57038a14.png"},87:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-redline.8c26ca8a.png"},88:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-yellowline.90eb524b.png"},91:function(e,t,n){e.exports=n.p+"static/media/IDAWANY-switches.049c4d96.png"}},[[108,1,2]]]);
//# sourceMappingURL=main.66b54e89.chunk.js.map